/* ---------------------------
   GLOBAL DESIGN TOKENS
---------------------------- */
:root{
  --bg: #070A10;
  --fg: rgba(255,255,255,.86);
  --muted: rgba(255,255,255,.62);
  --hair: rgba(255,255,255,.10);

  /* Accent is subtle. Not rainbow. */
  --accent: 120, 255, 210; /* mint-cyan (RGB only) */
  --accent2: 160, 140, 255; /* secondary for gradients (RGB only) */

  --max: 1080px;
  --pad: clamp(18px, 4vw, 42px);

  --radius: 18px;
  --ease: cubic-bezier(.2,.9,.2,1);
}

/* Per-page theme hooks (optional) */
html[data-theme="trust"] { --accent: 140, 190, 255; }
html[data-theme="gov"]   { --accent: 160, 255, 210; }
html[data-theme="intel"] { --accent: 255, 200, 160; }

*{ box-sizing:border-box; }
html,body{ height:100%; }
body{
  margin:0;
  background: var(--bg);
  color: var(--fg);
  font-family: system-ui, -apple-system, Segoe UI, Inter, Arial, sans-serif;
  -webkit-font-smoothing: antialiased;
  text-rendering: geometricPrecision;
  overflow-x:hidden;
}

/* Typography (use your current font if it already looks perfect) */
h1,h2,h3{
  margin:0 0 .6rem 0;
  letter-spacing: -0.02em;
}
p{
  margin:0 0 1rem 0;
  color: var(--muted);
  line-height: 1.65;
}

/* Layout shell */
.wrap{
  width:100%;
  max-width: var(--max);
  margin:0 auto;
  padding: 0 var(--pad);
}
main{
  padding: clamp(22px, 5vw, 64px) 0 80px;
}

/* ---------------------------
   EFFECT SYSTEM (THE FIX)
---------------------------- */

/* Ambient layers: grid + noise + vignette + spotlight */
.fx-stage{
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 0;
}

.fx-grid{
  position:absolute; inset:-2px;
  background:
    linear-gradient(to right, rgba(255,255,255,.06) 1px, transparent 1px),
    linear-gradient(to bottom, rgba(255,255,255,.05) 1px, transparent 1px);
  background-size: 56px 56px;
  opacity: .08;
  mask-image: radial-gradient(circle at 50% 30%, black 0%, black 45%, transparent 72%);
}

.fx-noise{
  position:absolute; inset:-20%;
  opacity: .06;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='120' height='120'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='120' height='120' filter='url(%23n)' opacity='.45'/%3E%3C/svg%3E");
  transform: translateZ(0);
}

.fx-vignette{
  position:absolute; inset:0;
  background: radial-gradient(circle at 50% 20%, transparent 0%, rgba(0,0,0,.35) 55%, rgba(0,0,0,.75) 100%);
  opacity:.9;
}

.fx-spotlight{
  position:absolute; inset:-40%;
  background: radial-gradient(circle at var(--mx, 50%) var(--my, 35%),
    rgba(var(--accent), .16) 0%,
    rgba(var(--accent2), .10) 18%,
    rgba(255,255,255,.03) 32%,
    transparent 55%);
  filter: blur(10px);
  opacity: .9;
}

/* Content above effects */
.site{
  position: relative;
  z-index: 1;
}

/* Section styling without “boxes” */
.section{
  padding: clamp(18px, 3vw, 28px) 0;
  border-top: 1px solid var(--hair);
  position: relative;
}

.section:first-child{ border-top: 0; }

.section::before{
  content:"";
  position:absolute;
  inset:-10px calc(-1 * var(--pad)) -10px calc(-1 * var(--pad));
  border-radius: 28px;
  opacity: 0;
  background: radial-gradient(circle at 20% 20%,
    rgba(var(--accent), .14),
    transparent 55%);
  transition: opacity .35s var(--ease);
}

.section:hover::before,
.section:focus-within::before,
.section.is-active::before{
  opacity: 1;
}

/* Subtitle highlight treatment */
.kicker{
  display:inline-flex;
  gap:.65rem;
  align-items:center;
  font-size: .85rem;
  letter-spacing:.14em;
  text-transform: uppercase;
  color: rgba(255,255,255,.70);
  margin-bottom: .8rem;
}
.kicker::before{
  content:"";
  width: 18px;
  height: 1px;
  background: rgba(var(--accent), .8);
  box-shadow: 0 0 18px rgba(var(--accent), .35);
}

/* Headline treatment */
.hero-title{
  font-size: clamp(36px, 5vw, 54px);
  line-height: 1.03;
  color: rgba(255,255,255,.92);
}
.hero-sub{
  font-size: clamp(16px, 2vw, 18px);
  max-width: 70ch;
  margin-top: 1.1rem;
}

/* Scroll reveal */
.reveal{
  opacity: 0;
  transform: translateY(14px);
  transition: opacity .8s var(--ease), transform .8s var(--ease);
  will-change: opacity, transform;
}
.reveal.is-in{
  opacity: 1;
  transform: translateY(0);
}

/* “Typed” line (optional) */
.type-line{
  display:block;
  white-space: nowrap;
  overflow:hidden;
  border-right: 1px solid rgba(255,255,255,.28);
  width: 0;
}
.type-line.is-typed{
  animation: typing var(--tDur, 1.6s) steps(var(--tSteps, 40), end) forwards,
             caret 900ms steps(1,end) infinite;
}
@keyframes typing{ to{ width: 100%; } }
@keyframes caret{ 50%{ border-color: transparent; } }

/* Footer / nav bar can stay minimal (not overtake space) */
.footer{
  margin-top: 64px;
  padding-top: 18px;
  border-top: 1px solid var(--hair);
  display:flex;
  justify-content: space-between;
  align-items:center;
  gap: 18px;
  flex-wrap: wrap;
  color: rgba(255,255,255,.55);
  font-size: .9rem;
}

a{ color: rgba(255,255,255,.78); text-decoration:none; }
a:hover{ color: rgba(255,255,255,.92); }

/* Reduced motion */
@media (prefers-reduced-motion: reduce){
  .reveal{ opacity:1; transform:none; }
  .type-line{ border-right:0; width:auto; }
  .type-line.is-typed{ animation:none; }
  .fx-spotlight{ display:none; }
}
